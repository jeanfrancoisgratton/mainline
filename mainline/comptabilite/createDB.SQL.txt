CREATE DATABASE comptabilite;

USE comptabilite;

CREATE TABLE __MONTHLY_TEMPLATE (mtID int(10) unsigned NOT NULL
AUTO_INCREMENT, mtPoste varchar(45) NOT NULL, mtDepense decimal(2,0) unsigned
NOT NULL, mtPayeur varchar(45) NOT NULL, mtIndivisible bit(1) NOT NULL,
PRIMARY KEY (mtID), UNIQUE KEY mtID_UNIQUE (mtID),UNIQUE KEY mtPoste_UNIQUE
(mtPoste)) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE _groupes (gid int(10) unsigned NOT NULL AUTO_INCREMENT,gName
varchar(20) NOT NULL,PRIMARY KEY (gid),UNIQUE KEY gid_UNIQUE (gid),UNIQUE KEY 
gName_UNIQUE (gName)) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO _groupes (gID, gName) VALUES (1, 'dba'),(2,'usagers'),(3, 'stats')
,(4,'readonly');

CREATE TABLE _usagers (uID int(10) unsigned NOT NULL AUTO_INCREMENT,uName
varchar(25) NOT NULL,uLongName varchar(45) DEFAULT NULL,gID int(11) unsigned
NOT NULL, uPassword text NOT NULL,uLastLogin char(19) DEFAULT 'jamais',PRIMARY
KEY (uID), UNIQUE KEY uID_UNIQUE (uID),UNIQUE KEY uName_UNIQUE (uName))
ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO _usagers (uID, uName, uLongName, gID, uPassword) VALUES
(1, 'dba', 'DB Administrator', 1, PASSWORD('jiefgroot')),(2,'vicky',
'Vicky Desrosiers',2,PASSWORD('vicky')),(3, 'jfg', 'J.F.Gratton',2,PASSWORD
('jiefg000')),(4, 'stats','Calcul de statistiques',3,PASSWORD('stats'));

INSERT INTO _usagers (uID, uName, uLongName, gID, uPassword) VALUES (5, 'guest',
'Anonyme (Lecture seulement)', 4, PASSWORD('compta'));

CREATE TABLE _postesbudgetaires (pbID int(10) unsigned NOT NULL
AUTO_INCREMENT,pbPoste varchar(45) NOT NULL,PRIMARY KEY (pbID), UNIQUE KEY
pbID_UNIQUE (pbID),UNIQUE KEY pbPoste_UNIQUE (pbPoste)) ENGINE=InnoDB DEFAULT
CHARSET=utf8;

INSERT INTO _postesbudgetaires (pbID, pbPoste) VALUES (1, 'loyer'),(2,
'essence'),(3, 'hydro-québec'),(4,'vidéotron');

GRANT ALL ON comptabilite.* TO 'compta'@'%' IDENTIFIED BY 'compta';
FLUSH PRIVILEGES;